%\documentclass[handout]{beamer}
\documentclass[t,french]{beamer}
\usepackage{babel}
\usepackage[latin1]{inputenc}
\usepackage{graphicx} %for jpg files
\usepackage{beamerthemesplit} % new 
\usetheme[compress]{Berlin}
\usecolortheme{beaver}
\usepackage{tikz}%tikz figures
\usetikzlibrary{shapes}
\usepackage{pgffor}% http://ctan.org/pkg/pgffor
\usepackage{multirow}
\usepackage{ifthen}
\usepackage{subfigure} %spacing for table of contents
%\usepackage{multimedia} %videos inside frame
\usepackage{boolexpr}
\usepackage{movie15}
%\usepackage{bbold}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}

\graphicspath{{images/}}

\def\R{ \ensuremath{\mathcal{R}} }
\def\C{ \ensuremath{\mathcal{C}} }
\def\SV{ \ensuremath{\mathcal{SV}} }

\setbeamercolor{alerted text}{fg=orange}
\setbeamercolor{background canvas}{bg=white}
\setbeamercolor{block body alerted}{bg=normal text.bg!90!black}
\setbeamercolor{block body}{bg=normal text.bg!90!black}
\setbeamercolor{block body example}{bg=normal text.bg!90!black}
\setbeamercolor{block title}{bg=blue}
\setbeamercolor{fine separation line}{}
\setbeamercolor{frametitle}{fg=black,bg=gray!30}
\setbeamercolor{item projected}{fg=black}
\setbeamercolor{normal text}{bg=black,fg=black}
\setbeamercolor{palette sidebar primary}{use=normal text,fg=normal text.fg}
\setbeamercolor{palette sidebar quaternary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar secondary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar tertiary}{use=normal text,fg=normal text.fg}
\setbeamercolor{section in sidebar}{fg=black}
\setbeamercolor{section in sidebar shaded}{fg= grey}
\setbeamercolor{separation line}{}
\setbeamercolor{sidebar}{bg=red}
\setbeamercolor{sidebar}{parent=palette primary}
\setbeamercolor{structure}{bg=black, fg=red}
\setbeamercolor{subsection in sidebar}{fg=black}
\setbeamercolor{subsection in sidebar shaded}{fg=grey}
\setbeamercolor{title}{fg=black!100,bg=gray!30}
\setbeamercolor{titlelike}{fg=brown}

%several template parameters
\setbeamertemplate{frametitle}[default][center]
\setbeamertemplate{blocks}[rounded][shadow=true]
%\beamertemplateshadingbackground{white!20}{black!20}
\setbeamertemplate{background canvas}[vertical shading][bottom=white,top=white!25]
\setbeamertemplate{sidebar canvas left}[horizontal shading][left=white!40!black,right=black]
\setbeamercolor{footline in sidebar}{fg=black}%[page number]
%\setbeamertemplate{footline}[frame number]
%suppress navigational bar
\beamertemplatenavigationsymbolsempty
%experimental stuff
\setbeamertemplate{title page}[default][rounded=true,shadow=true]


\include{tikz_commands}
\include{commands}

\setlength{\unitlength}{\textwidth}  % measure in textwidths
\begin{document}

\title{Introduction ROS}

\author{Olivier Stasse \\ LAAS-CNRS, Toulouse, France}
%-- \insertframenumber/\inserttotalframenumber}

\date{15-19/09/2014} 

\AtBeginSection[]
{
  \begin{frame}
    \frametitle{Table des matières}
    \tableofcontents[currentsection,
      hideothersubsections]
  \end{frame}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
{
  \usebackgroundtemplate{\includegraphics[width=1.0\paperwidth]{images/background-title-3.png}}
  \begin{frame}[plain]
    %\tikzstyle{stringbox}=[rectangle,color=black,fill=blue!10,text=black,draw,text opacity=0.4,align=flush center]
    \begin{tikzpicture}[remember picture, overlay]
       \node [yshift=1.8cm, xshift=-1cm, text width=4cm] (title) at (current page.center) 
            { Introduction à ROS \\
              Formation AIP};
       \node [xshift=-3.1cm,yshift=0.5cm,
              fill=white!10,fill opacity=0.7,right,text width=3cm]
             (author) at (current page.center) [scale=0.7]
            {
              Olivier STASSE, \\
              DR-2, CNRS, \\
              Gepetto, \\
              LAAS CNRS
            }; 
       \node [xshift=-3.1cm,yshift=-1.0cm,
              fill=white!10,fill opacity=0.7,
              right,text width=4cm]
        (author) 
        at (current page.center)
            {
              AIP, Toulouse\\
              Février 2016
            }; 
    \end{tikzpicture}
  \end{frame}
}
\begin{frame}
  \frametitle{Table des matières}
  \tableofcontents[hideallsubsections]
\end{frame}

\section{Panorama}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Motivations générales}
\begin{frame}
\frametitle{Motivations}
\begin{block}{Passage à l'échelle}
La communauté robotique doit \textit{collaborer} pour créer des systèmes robotiques
de qualité à l'exemple de l'informatique et la physique. \\
ROS est l'outil qui a permis ce passage. 
\end{block}

\begin{tikzpicture}[remember picture, overlay]
  \pgfputat{\pgfxy(0.0,-2.5)}{\pgfbox[left,base]{\pgfuseimage{ROSEquation}}};
  \node[xshift=3cm,yshift=-2.5cm]{Plomberie};
  \node[xshift=5cm,yshift=-2.5cm]{Outils};
  \node[xshift=7.15cm,yshift=-2.5cm]{Capacités};
  \node[xshift=9.21cm,yshift=-2.5cm]{Ecosystème};
\end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Motivations - Application robotique \only<2>{- Outils}\only<3>{distribuée}
  }
  
  \motivationpicture
  \motivationgraph
  \visible<1-2>{\logicalrelationship}
  \visible<2>{
    \implementationgraph
  }
  \visible<3>{
    \deploymentgraph
    \softwarerelationship
  }
\end{frame}
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Motivations - Plomberie}
  \begin{block}{Middleware}
    \begin{itemize}     
      \item Publication/souscription à la transmission de messages anonymes (Message Passing)
      \item Enregistrer et rejouer des messages
      \item Requêtes/réponses à des remote procedure calls
      \item Système de paramètres distribués
    \end{itemize}
  \end{block}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Motivations - Outils}
  \begin{itemize}
    \item[rviz] Visualisateur graphique 3D.
    \item[rosbag] Enregistrement et visualisation des données.
    \item[rxplot] Affichage en ligne.
    \item[rxgraph] Visualisation du système.
    \item[rqt] Interface graphique de contrôle incrémentale
    \item[catkin] Système de compilation et de gestion de paquets.
  \end{itemize}
  \begin{tikzpicture}[remember picture,overlay]
    \visible<1-5>{\node at (2,-1.) {\pgfuseimage{rviz}};}
    \visible<2-5>{\node at (3.5,-1.) {\pgfuseimage{rosbag-slam}};}
    \visible<3-5>{\node at (5,-1.) {\pgfuseimage{rxplot}};}
    \visible<4-5>{\node at (6.5,-1.) {\pgfuseimage{rxgraph}};}
    \visible<5>{\node at (8,-1.) {\pgfuseimage{rqt}};}
  \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Motivations - Ecosystème}
  \vskip 0.25cm
  \begin{itemize}
    \item Définitions de messages standards pour les robots
    \item Librairie pour la géométrie des robots
    \item Language de description des robots
    \item Remote Procedure Calls préemptable
    \item Diagnostiques
    \item Estimation de pose
    \item Localisation
    \item Cartographie
    \item Navigation
  \end{itemize}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
  \frametitle{Motivations - Ecosystème}
  \begin{columns}[t]
    \begin{column}[T]{0.5\linewidth}
      \begin{itemize}
        \item Systèmes d'exploitation
        \item Robots
        \item Packages
      \end{itemize}
    \end{column}
    \begin{column}[T]{0.5\linewidth}
      \visible<1>{\rosecosystem}
      \visible<2>{\robotsecosystem}
    \end{column}
  \end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{ROS - Introduction}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
\frametitle{ROS: Bref historique}
 \vskip -0.25cm
 {\footnotesize
 \begin{tabular}{|p{3cm}|p{7.5cm}|} \hline 
   2008 & Démarrage de ROS par Willow Garage \\ 
   2010 - Janvier & ROS 1.0 \\
   2010 - Mars & Box Turtle \\
   2010 - Aout & C Turtle \\
   2011 - Mars &  Diamondback \\
   2011 - Aout & Electric Emys \\
   2012 - Avril & Fuerte \\
   2012 - Décembre & Groovy Galapagos\\
   2013 - Février & Open Source Robotics Fundation poursuit la gestion de ROS \\
   2013 - Aout & Willow Garage est absorbé par Suitable Technologies \\
   2013 - Aout & Le support de PR-2 est repris par Clearpath Robotics\\
   2013 - Septembre& Hydro Medusa (prévu) \\ 
   2014 - Juillet & Indigo Igloo \\ 
   2015 - May & Jade Turtle \\ \hline
 \end{tabular}
 }
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
\frametitle{ROS: Normalisation des releases}
 \vskip -0.25cm
 \begin{itemize}
   \item Hydro Medusa (Aug 2013)
     \begin{itemize}
       \item Ubuntu Precise (12.04 LTS)
       \item Ubuntu Quantal (12.10)
       \item Ubuntu Raring (13.04)
       \item C++03, Boost 1.48, Lisp SBCL 1.0.x, Python 2.7, CMake 2.8.3
     \end{itemize}
   \item Indigo Igloo (May 2014)
     \begin{itemize}
       \item Ubuntu Saucy (13.10)
       \item Ubuntu Trusty (14.04 LTS)
       \item C++03, Boost 1.53, Lisp SBCL 1.0.x, Python 2.7, (Test
         additionels contre Python 3.3 recommendés) CMake 2.8.11
     \end{itemize}
   \item Lien vers la ROS Enhancement Proposal (REPs) :\\
     \url{http://www.ros.org/reps/rep-0003.html}
 \end{itemize}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Installation ROS Hydro}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Installation de ROS - Hydro - Ubuntu 12.04.4 LTS}
\begin{tikzpicture}[remember picture, overlay]        
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist] (instros1) 
      {1 - Spécifications des sources.list}; \\
    \node[roscode] (instros2) 
      {sudo sh -c 'echo "deb http ://packages.ros.org/ros/ubuntu
       precise main" $>$ /etc/apt/sources.list.d/ros-latest.list'}; \\
    \node[roslist] 
      {2 - Spécifications des clefs}; \\
    \node[roscode] 
      {wget http ://packages.ros.org/ros.key -O - $|$ sudo apt-key add -};\\
    \node[roslist] 
      {3 - Mise à jour des listes de paquets};\\
    \node[roscode] 
      {sudo apt-get update}; \\
    \node[roslist] 
      {4 - Installation des paquets};\\
    \node[roscode] 
      {sudo apt-get install ros-hydro-desktop-full};\\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Configuration ROS Hydro}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Configuration - Hydro - Ubuntu 12.04.4 LTS}
\begin{tikzpicture}[remember picture, overlay]        
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist] 
      {1 - Spécifications de ROS\_ROOT et ROS PACKAGE PATH }; \\
    \node[roscode] 
      {env $|$ grep ROS}; \\
    \node[roslist] 
      {2 - Ligne à ajouter au fichier .bashrc}; \\
    \node[roscode] 
      {source /opt/ros/hydro/setup.bash};\\
    \node[roslist] 
      {3 - Création de l'espace catkin};\\
    \node[roscode] 
      {mkdir -p \textasciitilde/catkin\_ws/src \\
       cd \textasciitilde/catkin\_ws/src \\
       catkin\_init\_workspace}; \\
    \node {\tiny Tutorial Installing and Confixguring Your ROS Environment :}; \\
    \node {\tiny \url{http://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment}}; \\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Configuration - Hydro - Ubuntu 12.04.4 LTS}
\begin{tikzpicture}[remember picture, overlay]        
  \matrix[anchor=west] at (0,-1.0)
  {
    \node[roslist] 
      {4 - Ligne à ajouter au fichier .bashrc}; \\
    \node[roscode] 
      {source \$HOME/catkin\_ws/devel/setup.bash}; \\
    \node {\tiny Tutorial Installing and Configuring Your ROS Environment :}; \\
    \node {\tiny \url{http://wiki.ros.org/ROS/Tutorials/InstallingandConfiguringROSEnvironment}}; \\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Configuration - Hydro - Ubuntu 12.04.4 LTS}
\begin{tikzpicture}[remember picture, overlay]        
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist] 
      { Votre distribution ROS est indiquée par ROS\_DISTRO }; \\
    \node[roscode] 
      {ROS\_DISTRO=hydro }; \\
    \node[roslist]
      { L'annuaire de votre application est spécifié par ROS\_MASTER\_URI};\\
    \node[roscode] 
      {ROS\_MASTER\_URI=http://localhost:11311 \\
       ROS\_MASTER\_URI=http://hostname:port\_number \\}; \\
    \node[roslist]
      {\textbf{hostname} dans ROS\_MASTER\_URI indique l'ordinateur où \textbf{roscore} est lancé.
        \textbf{port\_number} indique le port où \textbf{roscore} attend les connections. 
      };\\
  };
\end{tikzpicture}  
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Navigation dans ROS Hydro}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{ROS Filesystem - Navigation - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  \matrix[anchor=west] at (0,-3.0)
  {
    \node[roslist] 
      {1 - rospack : Donne les informations sur les paquets (exemple roscpp)}; \\
    \node[roscode] 
      {rospack find roscpp}; \\
    \node[roslist] 
      {2 - roscd : Bascule le répertoire directement sur le paquet}; \\
    \node[roscode] 
      {roscd roscpp \\
       roscd roscpp/cmake \\
       roscd log};\\
    \node[roslist] 
      {3 - rosls : Affiche le contenu du répertoire d'un paquet};\\
    \node[roscode] 
      {rosls roscpp\_tutorials}; \\
    \node {\tiny Tutorial Navigation dans le système de fichiers }; \\
    \node {\tiny \url{http://wiki.ros.org/ROS/Tutorials/NavigatingTheFilesystem}}; \\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Création d'un paquet pour ROS Hydro}    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Création d'un paquet ROS - Définition - Hydro}
  \begin{itemize}
    \item Le paquet doit contenir un fichier \textcolor{blue}{package.xml} qui suit le
      format catkin. Le fichier \textcolor{blue}{package.xml} contient des meta
      informations sur le paquet.
    \item Il n'y a qu'un seul paquet par répertoire. \\
      Les paquets imbriqués, et les paquets dans un même
      répertoire sont interdits.
  \end{itemize}
  Le paquet le plus simple est:
  \begin{tikzpicture}   
    \node[roscode]
      {mon\_paquet/\\
       CMakeLists.txt\\
       package.xml};
  \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Organisation des programmes sous ROS}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Création de paquets}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Paquets dans un workspace catkin - (1/9) - Hydro}
\tikzstyle{every node}=[anchor=west
%,font=\fontsize{6}{6}\selectfont
]
\tikzstyle{selected}=[draw=blue!50,fill=blue!20
%,font=\fontsize{6}{6}\selectfont
]
\tikzstyle{root}=[draw=blue,fill=blue!50
%,font=\fontsize{6}{6}\selectfont
]
{\scriptsize
\begin{tikzpicture}[%
  grow via three points={one child at (0.75,-0.5) and
  two children at (0.75,-0.5) and (0.75,-1.0)},
  edge from parent path={(\tikzparentnode.south) |- (\tikzchildnode.west)}]
  \node [root] {work\_space\_folder}
    child {  node [selected] {src}
      child { node {CMakeLists.txt}}
      child { node [selected] {package\_1}
        child { node {CMakeLists.txt}}
        child { node {package.xml}}
      }
     child [missing] {}				
     child [missing] {}
     child { node [selected] {...}}
     child { node [selected] {package\_n}
        child { node {CMakeLists.txt}}
        child { node {package.xml}}
      }
    };
\end{tikzpicture}
}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Paquets dans un workspace catkin - (2/9) - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist] 
      {1 - Aller dans le répertoire src du paquet}; \\
    \node[roscode] 
      {cd \~ /catkin\_ws/src}; \\
    \node[roslist]
    {Pour créer un nouveau package, et ses dépendences:\\
      {\bf catkin\_create\_pkg}}; \\
    \node[roscode]
    {catkin\_create\_pkg beginner\_tutorials std\_msgs rospy roscpp\\
     catkin\_create\_pkg [package\_name] [depend1] [depend2] [depend3]};\\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Paquets dans un workspace catkin - (3/9) - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  %\draw[help lines] (0,-3) grid (5,0);         
  %\node at (0,0) {(0,0)};
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist] 
      {2 - Dépendences du premier ordre}; \\
    \node[roscode] 
      {rospack depends1 beginner\_tutorials}; \\
    \node {\footnotesize Dépendences standards: std\_msgs rospy roscpp };\\
    \node[roslist]
    {3 - Les dépendences sont stockées dans le fichier package.xml}; \\
    \node[roscode]
    {roscd beginner\_tutorials\\
     cat package.xml};\\
    \node[roslist]
    { \footnotesize
      $<$package$>$\\
      ...\\
      $<$buildtool\_depend$>$catkin$<$/buildtool\_depend$>$\\
      $<$build\_depend$>$roscpp$<$/build\_depend$>$\\
      ...\\
      $<$/package$>$
    };\\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Paquets dans un workspace catkin - (4/9) - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  %\draw[help lines] (0,-3) grid (5,0);         
  %\node at (0,0) {(0,0)};
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist] 
      {4 - Dépendences indirectes d'un paquet}; \\
    \node[roscode] 
      {rospack depends beginner\_tutorials}; \\
    \node[roslist]
    { \footnotesize$<$package$>$\\
      cpp\_common\\
      rostime\\
      roscpp\_traits\\
      roscpp\_serialization\\
      ...\\
      roslib\\
     rospy \\
      $<$/package$>$
    };\\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Personnalisation du paquet - (5/9) - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  %\draw[help lines] (0,-3) grid (5,0);         
  %\node at (0,0) {(0,0)};
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist] 
      {5 - Description du paquet}; \\
    \node[roscode] 
      {$<$description$>$The beginner\_tutorials package$<$/description$>$}; \\
    \node[roscode]
    { \footnotesize$<$package$>$\\
      $<$!- One maintainer tag required, multiple allowed, one person per tag -$>$ \\
      $<$!- Exemple : -$>$ \\
      $<$!- $<$maintainer email="jane.doe@example.com"$>$Jane Doe$<$/maintainer$>$ -$>$ \\
      $<$maintainer email="user@todo.todo"$>$user$<$/maintainer$>$\\
    };\\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Personnalisation du paquet - (6/9) - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  %\draw[help lines] (0,-3) grid (5,0);         
  %\node at (0,0) {(0,0)};
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist]{7 - License du paquet}; \\
    \node[roscode] 
      {
        $<$!- One license tag required, multiple allowed, one license per tag -$>$ \\
        $<$!- Commonly used license strings : -$>$\\
        $<$!- BSD, MIT, Boost Software License, GPLv2, GPLv3, LGPLv2.1,LGPLv3 -$>$\\
        $<$license$>$TODO$<$/license$>$ }; \\
    \node[roslist]{La license souvent utilisée sous ROS est la BSD};\\
    \node[roscode]{ $<$license$>$BSD$<$/license$>$ };\\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Personnalisation du paquet - (7/9) - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  %\draw[help lines] (0,-3) grid (5,0);         
  %\node at (0,0) {(0,0)};
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist]{8 - Spécification des dépendences}; \\
    \node[roscode] 
      {\tiny $<$!- The * depend tags are used to specify dependencies -$>$ \\
       $<$!- Dependencies can be catkin packages or system dependencies -$>$ \\
       $<$!- Exemples : -$>$ \\
       $<$!- Use build\_depend for packages you need at compile time : -$>$ \\
       $<$!- $<$build\_depend$>$genmsg$<$/build\_depend$>$ -$>$\\
       $<$!- Use buildtool\_depend for build tool packages : -$>$\\
       $<$!- $<$buildtool\_depend$>$catkin$<$/buildtool\_depend$>$ -$>$\\
       $<$!- Use run\_depend for packages you need at runtime : -$>$\\
       $<$!- $<$run\_depend$>$python-yaml$<$/run\_depend$>$ -$>$\\
       $<$!- Use test depend for packages you need only for testing : -$>$\\
       $<$!- $<$test depend$>$gtest$<$/test depend$>$ -$>$\\
       $<$buildtool\_depend$>$catkin$<$/buildtool\_depend$>$\\
       $<$build\_depend$>$roscpp$<$/build\_depend$>$\\
       $<$build\_depend$>$rospy$<$/build\_depend$>$\\
       $<$build\_depend$>$std\_msgs$<$/build\_depend$>$ }; \\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Personnalisation du paquet - (8/9) - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  %\draw[help lines] (0,-3) grid (5,0);         
  %\node at (0,0) {(0,0)};
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist]{9 - Ajout de la dépendence à l'exécution:}; \\
    \node[roscode] 
      { 
        $<$buildtool\_depend$>$catkin$<$/buildtool\_depend$>$\\
        $<$build\_depend$>$roscpp$<$/build\_depend$>$\\
        $<$build\_depend$>$rospy$<$/build\_depend$>$\\
        $<$build\_depend$>$std\_msgs$<$/build\_depend$>$\\
        $<$run\_depend$>$roscpp$<$/run\_depend$>$\\
        $<$run\_depend$>$rospy$<$/run\_depend$>$\\
        $<$run\_depend$>$std\_msgs$<$/run\_depend$>$
      }; \\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Personnalisation du paquet - (9/9) - Hydro}
\begin{tikzpicture}[remember picture, overlay]        
  %\draw[help lines] (0,-3) grid (5,0);         
  %\node at (0,0) {(0,0)};
  \matrix[anchor=west] at (0,-2.5)
  {
    \node[roslist]{10 - Fichier \textcolor{blue}{package.xml} final}; \\
    \node[roscode] 
      { \tiny 
        $<$?xml version="1.0" ?$>$ \\
        $<$package$>$ \\
        $<$name$>$beginner\_tutorials$<$/name$>$\\
        $<$version$>$0.1.0$<$/version$>$ \\
        $<$description$>$The beginner tutorials package$<$/description$>$ \\
        $<$maintainer email="you@yourdomain.tld"$>$Your Name$<$/maintainer$>$\\
        $<$license$>$BSD$<$/license$>$ \\
        $<$url type="website"$>$http ://wiki.ros.org/beginner tutorials$<$/url$>$ \\
        $<$author email="you@yourdomain.tld"$>$Jane Doe$<$/author$>$ \\
        $<$buildtool\_depend$>$catkin$<$/buildtool\_depend$>$ \\
        $<$build\_depend$>$roscpp$<$/build\_depend$>$ \\
        $<$build\_depend$>$rospy$<$/build\_depend$>$ \\
        $<$build\_depend$>$std\_msgs$<$/build\_depend$>$ \\
        $<$run\_depend$>$roscpp$<$/run\_depend$>$ \\
        $<$run\_depend$>$rospy$<$/run\_depend$>$ \\
        $<$run\_depend$>$std\_msgs$<$/run\_depend$>$ \\
        $<$/package$>$
      }; \\
  };
\end{tikzpicture}  
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Compilation des paquets Hydro}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
    {
      \node[roslist]{
        La compilation de tous les paquets s'effectue avec une seule commande.\\
        Cette commande doit s'effectuer dans le répertoire du workspace.\\
        Le répertoire {\bf build} du workspace stocke les objets compilés intermédiaires.\\
        Le répertoire {\bf devel} du workspace stocke les exécutables et les
        librairies compilées.\\
      };\\
      \node[roscode]{
        catkin\_make \\
        catkin\_make install\\
      };\\
    };
  \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Définitions}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Graphe d'applications avec ROS}
  \begin{itemize}
    \item[Nodes]: Un node est un exécutable qui utilise ROS pour communiquer 
      avec d'autres noeuds.     
    \item[Messages]: Types de données ROS utilisés pour souscrire ou publié sur un topic.
    \item[Topics]: Les nodes peuvent \textit{publier} des messages sur un topic 
      aussi bien que \textit{souscrire} à un topic pour recevoir des messages.
    \item[Master]: Nom du service pour ROS (i.e. aide les noeuds à se trouver
      mutuellement).
    \item[{\footnotesize Paramètres}]: Informations très peu dynamiques qui doivent être partagés
      dans l'application.
    \item[rosout]: Equivalent de stdout/stderr.
    \item[roscore]: Master+rosout+parameter server (serveur de paramètres,
      introduit plus tard).
  \end{itemize}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Définitions - Node}
  \begin{itemize}
    \item Un fichier éxecutable dans un paquet ROS. 
    \item Les noeuds ROS utilisent une librairie client pour communiquer avec 
      les autres noeuds.
    \item Les noeuds peuvent \textbf{publier} ou \textbf{souscrire} à des 
      \textbf{topics}.
    \item Les noeuds peuvent fournir ou utiliser un \textbf{service}.
    \item Les librairies client sont :
      \begin{itemize}
        \item \textit{rospy} pour python.
        \item \textit{roscpp} pour C++.
      \end{itemize}
  \end{itemize}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Communications ROS}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{roscore}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Le système des Name services}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {Pour pouvoir localiser et interagir entre les nodes il faut un \textbf{annuaire}.\\
        C'est le rôle de \textbf{roscore}.};\\
        \node[roslist]
        {Il doit être lancé \textit{systématiquement} mais une seule fois.\\
         Si \textbf{roscore} ne se lance pas, il faut :
         \begin{itemize}
           \item Vérifier la connection réseau.
           \item Si roscore ne s'initialise pas et évoque un problème de droits, 
            il faut vérifier les droits sur le répertoire .ros
         \end{itemize}
        };\\
        \node[roslist]
        { \tiny
           Tutorial Understanding ROS Nodes : \url{http://wiki.ros.org/ROS/Tutorials/UnderstandingNodes}
        };\\
     };
  \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Le système des Name services}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {Pour obtenir la liste des nodes actifs :};\\
        \node[roscode]
        {rosnode list};\\
        \node[roslist]
        {Pour obtenir des informations sur un node :};\\
        \node[roscode]
        {rosnode info /rosout};\\
         \node[roslist]
        {\tiny Tutorial Understanding ROS Nodes : \url{http://wiki.ros.org/ROS/Tutorials/UnderstandingNodes}};\\
      };
   \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{rosrun}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Utilisation de rosrun}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {Pour pouvoir lancer un fichier exécutable/node d'un paquet}; \\
        \node[roscode]
        {rosrun [package\_name][node\_name]}; \\
        \node[roslist]
        {Par exemple pour lancer turtlesim :}; \\
        \node[roscode]
        {rosrun turtlesim turtlesim\_node}; \\
        \node[roslist]
        {Pour renommer des arguments (utiliser rosnode list pour vérifier) :};\\
        \node[roscode]
        {rosrun turtlesim turtlesim\_node --name:=my\_turtle};\\
        \node[roslist]
        {Pour tester si le node est actif};\\
        \node[roscode]
        {rosnode ping my\_turtle};\\
        \node[roslist]
        {\tiny Tutorial Understanding ROS Nodes : \url{http://wiki.ros.org/ROS/Tutorials/UnderstandingNodes}};\\
      };
   \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Comprendre les topics - Préparation}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {Pour démarrer turtle\_sim et turtle\_teleop\_key};\\
        \node[roscode]
        {rosrun turtlesim turtlesim\_node\\
         rosrun turtlesim turtle\_teleop\_key};\\
        \node[roslist]
        {Démarrer le graphe de l'application :};\\
        \node[roscode]
        {rosrun rqt\_graph rqt\_graph};\\
        \node[roslist]
        {Démarrer le graphe de l'affichage des topics:};\\
        \node[roscode]
        {rosrun rqt\_plot rqt\_plot};\\
        \node[roslist]
        {\tiny Tutorial Understanding ROS Topics : \url{http://wiki.ros.org/ROS/Tutorials/UnderstandingTopics}};\\
      };
   \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{rostopic}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Comprendre les topics - \textbf{rostopic}}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {Les topics sont des données \textbf{publiées} par des noeuds,
        et auquelles les noeuds \textbf{souscrivent}.\\
        L'exécutable permettant d'avoir des informations sur les topics
        est \textbf{rostopic}.};\\
        \node[roscode]
        {rostopic bw display bandwith used by topic\\
         rostopic echo print messages to screen\\
         rostopic hz display publishing rate of topic\\
         rostopic list print information about active topics\\
         rostopic pub publish data to topic\\
         rostopic type print topic type
        };\\
        \node[roslist]
        {\tiny Tutorial Understanding ROS Topics : \url{http://wiki.ros.org/ROS/Tutorials/UnderstandingTopics}};\\
      };
   \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{roswtf}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Vérifier son installation ros - \textbf{roswtf}}
  Ce programme vérifie l'installation de ROS et analyse les problèmes.
  \begin{itemize}       
    \item Effectue le test suivant le répertoire.
    \item Vérifie la cohérence de l'installation : variables d'environnements,
      paquets installés.
    \item Analyse le graphe en cours d'exécution.
  \end{itemize}
  {\tiny Tutorial Getting started with roswtf : \url{http://wiki.ros.org/ROS/Tutorials/Getting\%20started\%20with\%20roswtf}};
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{rqt\_console}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{rqt - \textbf{rqt\_console}}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {\textbf{rqt} est une interface d'affichage non 3D qui se peuple avec des plugins. 
          Elle permet de construire une interface de contrôle incrémentalement.
          L'exécutable permettant d'afficher les messages des noeuds de façon centralisé 
          est \textbf{rqt\_console}.};\\
        \node[roscode]
        { rosrun rqt\_console rqt\_console \\
          rosrun rqt\_logger\_level rqt\_logger\_level
        };\\
        \node[roslist]
        {\tiny Tutorial Using rqt console et roslaunch \url{http://wiki.ros.org/ROS/Tutorials/UsingRqtconsoleRoslaunch}};\\
      };

  \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{roslaunch}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Lancer plusieurs noeuds - \textbf{roslaunch}}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {\textbf{roslaunch} lit un fichier xml qui contient tous les paramètres
          pour lancer une application distribuée ROS.};\\
        \node[roscode]
        {roslaunch [package] [filename.launch]};\\
        \node[roslist]
        {Exemple :};\\
        \node[roscode]
        {roscd beginner\_tutorials\\
          roslaunch beginner\_tutorials turtlemimic.launch
        };\\
        \node[roslist]
        {\tiny Tutorial Using rqt console et roslaunch \url{http://wiki.ros.org/ROS/Tutorials/UsingRqtconsoleRoslaunch}};\\
      };
  \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{rosed}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Spécifier l'éditeur pour ROS - \textbf{rosed}}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {\textbf{roslaunch} permet d'éditer un fichier directement par le nom du paquet
          et non par le chemin entier. Il inclut la complétion par $<$Tab$>$.};\\
        \node[roscode]
        {rosed [package] [filename]};\\
        \node[roslist]
        {Exemple :};\\
        \node[roscode]
        {rosed roscpp Logger.msg};      \\
        \node[roslist]
        {L'éditeur utilisé est spécifié par la variable d'environnement EDITOR};\\
        \node[roscode]
        {export EDITOR='emacs'};\\
        \node[roslist]
        {\tiny Tutorial Using rosed to edit files in ROS \url{http://wiki.ros.org/ROS/Tutorials/UsingRosEd}};\\
      };
  \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{rosbag}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Enregistrer des données  - \textbf{rosbag}}
  \begin{tikzpicture}[remember picture, overlay]
    \matrix[anchor=west] at (0,-2.5)
      {
        \node[roslist]
        {\textbf{rosbag} permet d'enregistrer et de rejouer des données sur votre application.\\
        Pour enregistrer un sac de données :};       \\
        \node[roscode]
        {rosbag record -a \\
         rosbag record -O subset /turtle1/cmd\_vel /turtle1/pose};\\
        \node[roslist]
        {Le nom du fichier démarre avec l'année, la date et le temps et le suffixe .bag};\\
        \node[roslist]
        {\tiny Tutorial Recording and play back data \url{http://wiki.ros.org/ROS/Tutorials/Recording\%20and\%20playing\%20back\%20data}};\\
      };
  \end{tikzpicture}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Programmer avec ROS}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Tutorials couverts par cette partie}
  \begin{itemize}
    \item \href{http://wiki.ros.org/ROS/Tutorials/CreatingMsgAndSrv}{Création de fichiers ROS msg and srv}
    \item \href{http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber\%28c\%2B\%2B\%29}{Ecrire un simple souscripteur et publieur (C++)}
    \item \href{http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber\%28python\%29}{Ecrire un simple souscripteur et publieur (Python)}
    \item \href{http://wiki.ros.org/ROS/Tutorials/WritingServiceClient\%28c\%2B\%2B\%29}{Ecrire un simple service et un client (C++)}
    \item \href{http://wiki.ros.org/ROS/Tutorials/WritingServiceClient\%28python\%29}{Ecrire un simple service et un client (Python)}
    \item \href{http://wiki.ros.org/ROS/Tutorials/ExaminingServiceClient}{Faire fonctionner ensemble le client simple et le service simple.}
  \end{itemize}
\end{frame}
\end{document}

